{"version":3,"file":"js/488.db312510.js","mappings":"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","sources":["webpack://vue2.0/./src/view/government/governmentList.vue","webpack://vue2.0/src/view/government/governmentList.vue","webpack://vue2.0/./src/view/government/governmentList.vue?a90a","webpack://vue2.0/./src/view/government/governmentList.vue?6fcb","webpack://vue2.0/./src/api/article.js","webpack://vue2.0/./src/utils/timerHandler.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"container-title\"},[_vm._v(\"文章管理\")]),_c('div',{staticClass:\"user-btn\"},[_c('el-button',{staticClass:\"user-btn-inp\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"新增\")])],1),_c('div',{staticClass:\"table-list\"},[_c('el-table',{ref:\"singleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"property\":\"id\",\"label\":\"id\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"property\":\"title\",\"label\":\"文章标题\"}}),_c('el-table-column',{attrs:{\"property\":\"createTime\",\"label\":\"创建时间\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.timerHandler(scope.row.createTime))+\" \")]}}])}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.previewContent(scope.row)}}},[_vm._v(\" 预览 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.editGovernment(scope.row)}}},[_vm._v(\" 编辑 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.deleteGovernment(scope.row)}}},[_vm._v(\" 移除 \")])]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.form.pageNumber,\"layout\":\"prev, pager, next,jumper\",\"total\":_vm.total,\"page-size\":_vm.form.pageSize},on:{\"current-change\":_vm.currentChange}})],1)],1),_c('el-dialog',{attrs:{\"title\":\"预览\",\"width\":'410px',\"visible\":_vm.dialogVisible},on:{\"close\":_vm.close,\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"dialog-modal-container\"},[_c('div',{staticStyle:{\"margin-bottom\":\"20px\"}},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"html-box\",domProps:{\"innerHTML\":_vm._s(_vm.html)}})])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container\">\r\n        <div class=\"container-title\">文章管理</div>\r\n        <!-- <div class=\"search-box\">\r\n            <div class=\"search-item\">\r\n                <div class=\"search-item-title\">文章标题</div>\r\n                <el-input class=\"search-item-inp\" size=\"small \" v-model=\"input\" placeholder=\"\"></el-input>\r\n            </div>\r\n            <div class=\"search-item\">\r\n                <div class=\"search-item-title\">标题</div>\r\n                <el-input class=\"search-item-inp\" size=\"small\" v-model=\"input\" placeholder=\"\"></el-input>\r\n            </div>\r\n        </div> -->\r\n        <div class=\"user-btn\">\r\n            <el-button class=\"user-btn-inp\" @click=\"add\" type=\"primary\">新增</el-button>\r\n        </div>\r\n        <div class=\"table-list\">\r\n            <el-table ref=\"singleTable\" :data=\"tableData\" style=\"width: 100%\">\r\n                <el-table-column property=\"id\" label=\"id\" width=\"50\">\r\n                </el-table-column>\r\n                <el-table-column property=\"title\" label=\"文章标题\">\r\n                </el-table-column>\r\n                <el-table-column property=\"createTime\" label=\"创建时间\" width=\"300\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{timerHandler(scope.row.createTime)}}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column fixed=\"right\" label=\"操作\" width=\"120\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button @click.native.prevent=\"previewContent(scope.row)\" type=\"text\" size=\"small\">\r\n                            预览\r\n                        </el-button>\r\n                        <el-button @click.native.prevent=\"editGovernment(scope.row)\" type=\"text\" size=\"small\">\r\n                            编辑\r\n                        </el-button>\r\n                        <el-button @click.native.prevent=\"deleteGovernment(scope.row)\" type=\"text\" size=\"small\">\r\n                            移除\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <div class=\"pagination\">\r\n                <el-pagination :current-page=\"form.pageNumber\" layout=\"prev, pager, next,jumper\" :total=\"total\" @current-change=\"currentChange\" :page-size=\"form.pageSize\">\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n        <el-dialog title=\"预览\" :width=\"'410px'\" @close=\"close\" :visible.sync=\"dialogVisible\">\r\n            <div class=\"dialog-modal-container\">\r\n                <div style=\"margin-bottom: 20px\">{{title}}</div>\r\n                <div v-html=\"html\" class=\"html-box\" style=\"\"></div>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { articleList, articleDelete, articleDetail } from '@/api/article';\r\nimport timerHandler from '@/utils/timerHandler';\r\nexport default {\r\n    data () {\r\n        return {\r\n            tableData: [],\r\n            form: {\r\n                pageNumber: 1,\r\n                pageSize: 10,\r\n                isPaging: true,\r\n            },\r\n            total: 0,\r\n            input: '',\r\n            timerHandler,\r\n            dialogVisible: false,\r\n            title: '',\r\n            html: ''\r\n        };\r\n    },\r\n    created () {\r\n        this.getList();\r\n    },\r\n    methods: {\r\n        currentChange (val) {\r\n            this.form.pageNumber = val;\r\n            this.getList();\r\n        },\r\n        getList () {\r\n            articleList(this.form).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.total = res.data.data.amount;\r\n                    this.tableData = res.data.data.rows.map(item => {\r\n                        return {\r\n                            ...item.articleRow,\r\n                            categoryRow: item.categoryRow\r\n                        };\r\n                    });\r\n                    console.log(this.tableData);\r\n                } else {\r\n                    this.total = 0;\r\n                    this.tableData = [];\r\n                    this.form.pageNumber = 1;\r\n                }\r\n            });\r\n        },\r\n        handleClick (item) {\r\n            console.log(item);\r\n        },\r\n        add () {\r\n            this.$router.push({\r\n                path: '/government/governmentAddOrEdit',\r\n                query: {\r\n                    type: 'add'\r\n                }\r\n            });\r\n        },\r\n        handleCurrentChange (val) {\r\n            console.log(val);\r\n        },\r\n        deleteGovernment (row) {\r\n            this.$confirm('此操作将永久删除该文章, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.articleDelete(row);\r\n            }).catch(() => {\r\n\r\n            });\r\n        },\r\n        articleDelete (row) {\r\n            articleDelete({ id: row.id }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.$message.success('删除成功');\r\n                    this.getList();\r\n                } else {\r\n                    this.$message.error(`${res.data.message},${res.data.detail}`);\r\n                }\r\n            });\r\n        },\r\n        editGovernment (row) {\r\n            console.log(row.categoryId);\r\n            this.$router.push({\r\n                path: '/government/governmentAddOrEdit',\r\n                query: {\r\n                    type: 'edit',\r\n                    id: row.id,\r\n                    categoryId: row.categoryId\r\n                }\r\n            });\r\n        },\r\n        previewContent (row) {\r\n            articleDetail({ id: `${row.id}` }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    const { content, title } = res.data.data.articleRow;\r\n                    this.dialogVisible = true;\r\n                    this.title = title;\r\n                    this.html = content;\r\n                }\r\n            });\r\n        },\r\n        close () {\r\n            this.dialogVisible = false;\r\n            const videos = document.querySelectorAll('video');\r\n            if (videos) {\r\n                videos.forEach(item => {\r\n                    item.pause();\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dialog-modal-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n.html-box {\r\n    width: 375px;\r\n    border: 1px solid #ccc;\r\n    /* padding: 10px; */\r\n    box-sizing: border-box;\r\n    padding: 10px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./governmentList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./governmentList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./governmentList.vue?vue&type=template&id=6b3f5f24&scoped=true&\"\nimport script from \"./governmentList.vue?vue&type=script&lang=js&\"\nexport * from \"./governmentList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./governmentList.vue?vue&type=style&index=0&id=6b3f5f24&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b3f5f24\",\n  null\n  \n)\n\nexport default component.exports","import { postAxios, getAxios } from '../utils/http';\r\n\r\n// 创建分类\r\nexport const categoryCreate = (params) => {\r\n    return postAxios('/article/category/create', params);\r\n};\r\n\r\n// 分类列表\r\nexport const categoryList = (params) => {\r\n    return getAxios('/article/category/list', params);\r\n};\r\n\r\n// 分类详情\r\nexport const categoryDetail = (params) => {\r\n    return getAxios('/article/category/detail', params);\r\n};\r\n\r\n// 分类更新\r\nexport const categoryUpdate = (params) => {\r\n    return postAxios('/article/category/update', params);\r\n};\r\n\r\n// 分类删除\r\nexport const categoryDelete = (params) => {\r\n    return postAxios('/article/category/delete', params);\r\n};\r\n\r\n// 创建文章\r\nexport const articleCreate = (params) => {\r\n    return postAxios('/article/publish', params);\r\n};\r\n\r\n// 文章列表\r\nexport const articleList = (params) => {\r\n    return getAxios('/article/list', params);\r\n};\r\n\r\n// 文章详情\r\nexport const articleDetail = (params) => {\r\n    return getAxios('/article/detail', params);\r\n};\r\n\r\n// 文章更新\r\nexport const articleUpdate = (params) => {\r\n    return postAxios('/article/update', params);\r\n};\r\n\r\n// 删除文章\r\nexport const articleDelete = (params) => {\r\n    return postAxios('/article/delete', params);\r\n};","const timerHandler = (str) => {\r\n    if (!str) {\r\n        return '';\r\n    }\r\n    const isBeginTen = (str) => {\r\n        return str >= 10 ? str : '0' + str;\r\n    };\r\n    const date = new Date(Number(str)); //获取一个时间对象\r\n    const year = date.getFullYear();  // 获取完整的年份(4位,1970)\r\n    const month = date.getMonth() + 1;  // 获取月份(0-11,0代表1月,用的时候记得加上1)\r\n    const day = date.getDate();  // 获取日(1-31)\r\n    const hour = date.getHours();  // 获取小时数(0-23)\r\n    const minutes = date.getMinutes();  // 获取分钟数(0-59)\r\n    const seconds = date.getSeconds();\r\n    return year + '-' + isBeginTen(month) + '-' + isBeginTen(day) + ' ' + isBeginTen(hour) + ':' + isBeginTen(minutes) + ':' + isBeginTen(seconds);\r\n};\r\n\r\n\r\n\r\nexport default timerHandler;"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","add","ref","staticStyle","tableData","scopedSlots","_u","key","fn","scope","_s","timerHandler","row","createTime","nativeOn","$event","preventDefault","previewContent","editGovernment","deleteGovernment","form","pageNumber","total","pageSize","currentChange","dialogVisible","close","title","domProps","html","staticRenderFns","data","isPaging","input","created","methods","getList","articleList","categoryRow","console","handleClick","path","query","type","handleCurrentChange","confirmButtonText","cancelButtonText","then","catch","articleDelete","id","categoryId","articleDetail","content","videos","item","component","categoryCreate","params","postAxios","categoryList","getAxios","categoryUpdate","categoryDelete","articleCreate","articleUpdate","str","isBeginTen","date","Date","Number","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minutes","getMinutes","seconds","getSeconds"],"sourceRoot":""}