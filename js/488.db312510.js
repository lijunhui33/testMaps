"use strict";(self["webpackChunkvue2_0"]=self["webpackChunkvue2_0"]||[]).push([[488],{7150:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"container-title"},[t._v("文章管理")]),e("div",{staticClass:"user-btn"},[e("el-button",{staticClass:"user-btn-inp",attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")])],1),e("div",{staticClass:"table-list"},[e("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{property:"id",label:"id",width:"50"}}),e("el-table-column",{attrs:{property:"title",label:"文章标题"}}),e("el-table-column",{attrs:{property:"createTime",label:"创建时间",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.timerHandler(e.row.createTime))+" ")]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.previewContent(a.row)}}},[t._v(" 预览 ")]),e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.editGovernment(a.row)}}},[t._v(" 编辑 ")]),e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteGovernment(a.row)}}},[t._v(" 移除 ")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.form.pageNumber,layout:"prev, pager, next,jumper",total:t.total,"page-size":t.form.pageSize},on:{"current-change":t.currentChange}})],1)],1),e("el-dialog",{attrs:{title:"预览",width:"410px",visible:t.dialogVisible},on:{close:t.close,"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"dialog-modal-container"},[e("div",{staticStyle:{"margin-bottom":"20px"}},[t._v(t._s(t.title))]),e("div",{staticClass:"html-box",domProps:{innerHTML:t._s(t.html)}})])])],1)},n=[],r=(a(7658),a(8572)),l=a(9488),o={data(){return{tableData:[],form:{pageNumber:1,pageSize:10,isPaging:!0},total:0,input:"",timerHandler:l.Z,dialogVisible:!1,title:"",html:""}},created(){this.getList()},methods:{currentChange(t){this.form.pageNumber=t,this.getList()},getList(){(0,r.X0)(this.form).then((t=>{0==t.data.code?(this.total=t.data.data.amount,this.tableData=t.data.data.rows.map((t=>({...t.articleRow,categoryRow:t.categoryRow}))),console.log(this.tableData)):(this.total=0,this.tableData=[],this.form.pageNumber=1)}))},handleClick(t){console.log(t)},add(){this.$router.push({path:"/government/governmentAddOrEdit",query:{type:"add"}})},handleCurrentChange(t){console.log(t)},deleteGovernment(t){this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.articleDelete(t)})).catch((()=>{}))},articleDelete(t){(0,r.XE)({id:t.id}).then((t=>{0==t.data.code?(this.$message.success("删除成功"),this.getList()):this.$message.error(`${t.data.message},${t.data.detail}`)}))},editGovernment(t){console.log(t.categoryId),this.$router.push({path:"/government/governmentAddOrEdit",query:{type:"edit",id:t.id,categoryId:t.categoryId}})},previewContent(t){(0,r.mx)({id:`${t.id}`}).then((t=>{if(0==t.data.code){const{content:e,title:a}=t.data.data.articleRow;this.dialogVisible=!0,this.title=a,this.html=e}}))},close(){this.dialogVisible=!1;const t=document.querySelectorAll("video");t&&t.forEach((t=>{t.pause()}))}}},s=o,c=a(1001),u=(0,c.Z)(s,i,n,!1,null,"6b3f5f24",null),d=u.exports},8572:function(t,e,a){a.d(e,{O3:function(){return s},X0:function(){return c},XE:function(){return g},ab:function(){return n},fH:function(){return d},lI:function(){return o},mx:function(){return u},wA:function(){return r},y1:function(){return l}});var i=a(8108);const n=t=>(0,i.xW)("/article/category/create",t),r=t=>(0,i.FP)("/article/category/list",t),l=t=>(0,i.xW)("/article/category/update",t),o=t=>(0,i.xW)("/article/category/delete",t),s=t=>(0,i.xW)("/article/publish",t),c=t=>(0,i.FP)("/article/list",t),u=t=>(0,i.FP)("/article/detail",t),d=t=>(0,i.xW)("/article/update",t),g=t=>(0,i.xW)("/article/delete",t)},9488:function(t,e){const a=t=>{if(!t)return"";const e=t=>t>=10?t:"0"+t,a=new Date(Number(t)),i=a.getFullYear(),n=a.getMonth()+1,r=a.getDate(),l=a.getHours(),o=a.getMinutes(),s=a.getSeconds();return i+"-"+e(n)+"-"+e(r)+" "+e(l)+":"+e(o)+":"+e(s)};e["Z"]=a}}]);
//# sourceMappingURL=488.db312510.js.map