{"version":3,"file":"js/822.8fa8f32d.js","mappings":"wJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACJ,EAAIK,GAAG,UAAUH,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,YAAY,CAACE,YAAY,eAAeE,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQP,EAAIQ,MAAM,CAACR,EAAIK,GAAG,SAAS,GAAGH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,WAAW,CAACO,IAAI,cAAcC,YAAY,CAAC,MAAQ,QAAQJ,MAAM,CAAC,KAAON,EAAIW,YAAY,CAACT,EAAG,kBAAkB,CAACI,MAAM,CAAC,SAAW,KAAK,MAAQ,KAAK,MAAQ,QAAQJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,SAAW,QAAQ,MAAQ,QAAQJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,SAAW,aAAa,MAAQ,QAAQM,YAAYZ,EAAIa,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAChB,EAAIK,GAAG,IAAIL,EAAIiB,GAAGjB,EAAIkB,aAAaF,EAAMG,IAAIC,aAAa,KAAM,OAAMlB,EAAG,kBAAkB,CAACI,MAAM,CAAC,SAAW,WAAW,MAAQ,OAAO,MAAQ,SAASJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,QAAQ,MAAQ,KAAK,MAAQ,OAAOM,YAAYZ,EAAIa,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACd,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,SAASe,SAAS,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBvB,EAAIwB,YAAYR,EAAMG,IAAK,IAAG,CAACnB,EAAIK,GAAG,YAAYH,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,SAASe,SAAS,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBvB,EAAIyB,gBAAgBT,EAAMG,IAAK,IAAG,CAACnB,EAAIK,GAAG,YAAYH,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,SAASe,SAAS,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBvB,EAAI0B,YAAYV,EAAMG,IAAK,IAAG,CAACnB,EAAIK,GAAG,UAAUH,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,SAASe,SAAS,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBvB,EAAI2B,SAASX,EAAMG,IAAK,IAAG,CAACnB,EAAIK,GAAG,UAAUH,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,SAASe,SAAS,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBvB,EAAI4B,QAAQZ,EAAMG,IAAK,IAAG,CAACnB,EAAIK,GAAG,UAAW,QAAO,GAAGH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,gBAAgB,CAACI,MAAM,CAAC,eAAeN,EAAI6B,KAAKC,WAAW,OAAS,2BAA2B,MAAQ9B,EAAI+B,MAAM,YAAY/B,EAAI6B,KAAKG,UAAUzB,GAAG,CAAC,iBAAiBP,EAAIiC,kBAAkB,IAAI,GAAG/B,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,OAAO,QAAUN,EAAIkC,eAAe3B,GAAG,CAAC,iBAAiB,SAASe,GAAQtB,EAAIkC,cAAcZ,CAAO,IAAG,CAACtB,EAAImC,GAAInC,EAAIoC,eAAe,SAASC,EAAKC,GAAO,OAAOpC,EAAG,MAAM,CAACY,IAAK,UAASwB,KAAS,CAACpC,EAAG,MAAM,CAACQ,YAAY,CAAC,QAAU,YAAY,YAAY,OAAO,cAAc,SAAS,CAACV,EAAIK,GAAG,KAAKL,EAAIiB,GAAGqB,EAAQ,GAAG,KAAKpC,EAAG,YAAY,CAACqC,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAgB,GAATJ,EAAYK,WAAW,eAAejC,YAAY,CAAC,cAAc,QAAQJ,MAAM,CAAC,KAAO,QAAQC,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAOtB,EAAI4C,cAAcN,EAAO,IAAG,CAACtC,EAAIK,GAAG,SAAS,GAAGH,EAAG,UAAU,CAACO,IAAI,OAAOoC,UAAS,EAAKvC,MAAM,CAAC,MAAQ+B,EAAK,cAAc,SAAS,CAACnC,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,WAAW,CAACQ,YAAY,CAAC,MAAQ,SAASoC,MAAM,CAACJ,MAAOL,EAAKU,MAAOC,SAAS,SAAUC,GAAMjD,EAAIkD,KAAKb,EAAM,QAASY,EAAK,EAACN,WAAW,iBAAiB,GAAGzC,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,WAAW,CAACQ,YAAY,CAAC,MAAQ,SAASJ,MAAM,CAAC,KAAO,WAAW,SAAW,CAAE6C,QAAS,EAAGC,QAAS,IAAIN,MAAM,CAACJ,MAAOL,EAAKgB,YAAaL,SAAS,SAAUC,GAAMjD,EAAIkD,KAAKb,EAAM,cAAeY,EAAK,EAACN,WAAW,uBAAuB,GAAGzC,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,aAAa,CAACI,MAAM,CAAC,SAAW+B,EAAKiB,gBAAgB,MAAQhB,EAAM,KAAO,UAAU/B,GAAG,CAAC,QAAUP,EAAIuD,cAAc,QAAUvD,EAAIwD,iBAAiB,IAAI,IAAI,EAAG,IAAEtD,EAAG,MAAM,CAAC,EAAE,CAACA,EAAG,YAAY,CAACK,GAAG,CAAC,MAAQP,EAAIyD,gBAAgB,CAACzD,EAAIK,GAAG,WAAW,GAAGH,EAAG,MAAM,CAACI,MAAM,CAAC,KAAO,UAAUoD,KAAK,UAAU,CAACxD,EAAG,YAAY,CAACK,GAAG,CAAC,MAAQ,SAASe,GAAQtB,EAAIkC,eAAgB,CAAM,IAAG,CAAClC,EAAIK,GAAG,SAASH,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQP,EAAI2D,YAAY,CAAC3D,EAAIK,GAAG,UAAU,IAAI,GAAGH,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,OAAO,QAAUN,EAAI4D,gBAAgBrD,GAAG,CAAC,iBAAiB,SAASe,GAAQtB,EAAI4D,eAAetC,CAAO,IAAGtB,EAAImC,GAAInC,EAAI6D,eAAe,SAASxB,EAAKC,GAAO,OAAOpC,EAAG,MAAM,CAACY,IAAK,UAASwB,KAAS,CAACpC,EAAG,MAAM,CAACQ,YAAY,CAAC,QAAU,YAAY,YAAY,OAAO,cAAc,SAAS,CAACV,EAAIK,GAAG,KAAKL,EAAIiB,GAAGqB,EAAQ,GAAG,KAAKpC,EAAG,YAAY,CAACQ,YAAY,CAAC,cAAc,QAAQJ,MAAM,CAAC,KAAO,QAAQC,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAOtB,EAAI8D,YAAYxB,EAAO,IAAG,CAACtC,EAAIK,GAAG,QAAQH,EAAG,YAAY,CAACQ,YAAY,CAAC,cAAc,QAAQJ,MAAM,CAAC,KAAO,QAAQC,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAOtB,EAAI+D,cAAczB,EAAO,IAAG,CAACtC,EAAIK,GAAG,SAAS,GAAGH,EAAG,UAAU,CAACO,IAAI,OAAOoC,UAAS,EAAKvC,MAAM,CAAC,MAAQ+B,EAAK,cAAc,SAAS,CAACnC,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,WAAW,CAACQ,YAAY,CAAC,MAAQ,SAASoC,MAAM,CAACJ,MAAOL,EAAKU,MAAOC,SAAS,SAAUC,GAAMjD,EAAIkD,KAAKb,EAAM,QAASY,EAAK,EAACN,WAAW,iBAAiB,GAAGzC,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,WAAW,CAACQ,YAAY,CAAC,MAAQ,SAASJ,MAAM,CAAC,KAAO,WAAW,SAAW,CAAE6C,QAAS,EAAGC,QAAS,IAAIN,MAAM,CAACJ,MAAOL,EAAKgB,YAAaL,SAAS,SAAUC,GAAMjD,EAAIkD,KAAKb,EAAM,cAAeY,EAAK,EAACN,WAAW,uBAAuB,GAAGzC,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,aAAa,CAACI,MAAM,CAAC,SAAW+B,EAAK2B,SAAS,MAAQ1B,EAAM,KAAO,UAAU/B,GAAG,CAAC,QAAUP,EAAIuD,cAAc,QAAUvD,EAAIwD,iBAAiB,IAAI,IAAI,EAAG,IAAE,IAAI,EAC5jK,EACGS,EAAkB,G,8BCFlBlE,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,YAAY,CAACO,IAAI,SAASH,MAAM,CAAC,OAASN,EAAIkE,IAAI,SAAW,GAAG,YAAYlE,EAAIgE,SAAS,OAAS,4BAA4B,QAAUhE,EAAImE,QAAQ,aAAanE,EAAIoE,QAAQ,YAAYpE,EAAIqE,QAAQ,aAAarE,EAAIsE,UAAU,CAACpE,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQ,KAAO,YAAY,CAACN,EAAIK,GAAG,WAAW,GAAGH,EAAG,YAAY,CAACI,MAAM,CAAC,iBAAiB,GAAG,MAAQ,KAAK,QAAUN,EAAIuE,UAAU,MAAQ,SAAShE,GAAG,CAAC,iBAAiB,SAASe,GAAQtB,EAAIuE,UAAUjD,CAAO,EAAC,MAAQtB,EAAIwE,cAAc,CAACtE,EAAG,MAAM,CAACE,YAAY,WAAW,CAAoB,OAAlBJ,EAAIyE,WAAqBvE,EAAG,MAAM,CAACI,MAAM,CAAC,IAAMN,EAAI0E,OAAO,IAAM,GAAG,OAAS,MAAM1E,EAAI2E,KAAwB,SAAlB3E,EAAIyE,WAAuBvE,EAAG,QAAQ,CAACQ,YAAY,CAAC,MAAQ,SAASJ,MAAM,CAAC,SAAW,WAAW,IAAMN,EAAI4E,SAAS,UAAU,UAAU5E,EAAI2E,UAAU,EAC90B,EACGV,EAAkB,G,UCgBtB,GACAY,OACA,OACAV,QAAAA,CACA,4CACA,mCAAAW,SAAAA,UAEAZ,IAAAA,GAAAA,EAAAA,EAAAA,sBACAQ,OAAAA,GACAH,WAAAA,EACAQ,aAAAA,EACAH,SAAAA,GACAH,WAAAA,GAEA,EACAO,MAAAA,CACAhB,SAAAA,MACA1B,MAAAA,OACA2C,KAAAA,QAEAC,QAAAA,CACAC,QAAAA,GACA,yBACA,gBACA,0BACA,EACAC,YAAAA,GAEA,8FACA,EACAhB,QAAAA,GACA,sBAAA9B,MAAAA,KAAAA,MAAAuC,KAAAA,EAAAA,KAAAI,KAAAA,KAAAA,MACA,EACAZ,QAAAA,GACA,iDACA,sBAAA/B,MAAAA,KAAAA,MAAA+C,GAAAA,EAAAA,SAAAA,KAAAA,GAAAJ,KAAAA,KAAAA,MAGA,EACAX,QAAAA,GACAgB,QAAAA,IAAAA,GACA,WACA,mCACA,4CACA,kBACA,wBAEA,wBACA,kBACA,+CAIA,QACA,qBACA,8BACA,kBACA,wBAEA,kBACA,wBACA,iCAGA,EACAd,cACA,2CACA,GACAe,EAAAA,SAAAA,IACAlD,EAAAA,OAAAA,GAGA,GAEAmD,MAAAA,CACAxB,SAAAA,CACAyB,QAAAA,SAAAA,GACAH,QAAAA,IAAAA,EACA,EACAI,MAAAA,KCjGmQ,I,UCQ/PC,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAeA,EAAiB,QC2FhC,GACAC,WAAAA,CAAAC,WAAAA,GACAhB,OACA,OACAlE,UAAAA,GACAkB,KAAAA,CACAC,WAAAA,EACAE,SAAAA,GACA8D,UAAAA,GAEA/D,MAAAA,EACAgE,MAAAA,GACA7E,aATA,IAUAgB,eAAAA,EACAiC,QAAAA,CACA,4CACA,mCAAAW,SAAAA,UAEA1C,cAAAA,CACA,CACAW,MAAAA,GACAM,YAAAA,GACA2C,WAAAA,GACA1C,gBAAAA,KAGAO,cAAAA,GAQAD,gBAAAA,EAEA,EACAqC,UACA,cACA,EACAf,QAAAA,CAEAjD,cAAAA,GACA,uBACA,cACA,EACAiE,WACAC,EAAAA,EAAAA,IAAAA,KAAAA,MAAAA,MAAAA,IACA,gBACA,8BACA,yCACA,IACA,EACAC,UAAAA,EAAAA,EAAAA,GAAAA,EAAAA,WAAAA,OAAAA,EAAAA,EAAAA,GAAAA,EAAAA,eAIA,aACA,kBACA,uBACA,GAEA,EACAC,YAAAA,GACAf,QAAAA,IAAAA,EACA,EACA9E,MACA,mBACA8F,KAAAA,sBACAC,MAAAA,CACAtB,KAAAA,QAGA,EACAuB,oBAAAA,GACAlB,QAAAA,IAAAA,EACA,EACA1D,QAAAA,GACA,yCACA6E,kBAAAA,KACAC,iBAAAA,KACAzB,KAAAA,YACA0B,MAAA,KACA,sBACAC,OAAA,QAGA,EACAC,WAAAA,IACAC,EAAAA,EAAAA,IAAAA,CAAAzB,GAAAA,EAAAA,KAAA,UACA,gBACA,8BACA,gBAEA,yDACA,GAEA,EACA1D,SAAAA,GACA,mBACA2E,KAAAA,sBACAC,MAAAA,CACAtB,KAAAA,OACAI,GAAAA,EAAAA,KAGA,EACA3D,YAAAA,GACA,mBACA4E,KAAAA,sBACAC,MAAAA,CACAtB,KAAAA,UACAI,GAAAA,EAAAA,KAGA,EAGA7D,YAAAA,GACA,iBACA,oBACA,CACAuB,MAAAA,GACAM,YAAAA,GACA2C,WAAAA,GACA1C,gBAAAA,KAGA,qBACA,EAEAyD,eAAAA,GACAzB,QAAAA,IAAAA,EACA,EAEA0B,gBAAAA,EAAAA,GACA,sBACA,EAEAC,UAAAA,GACA,kBACA,EAEAxD,gBACA,yBACAV,MAAAA,GACAM,YAAAA,GACA2C,WAAAA,GACA1C,gBAAAA,IAEA,EAEAV,cAAAA,GACA,8BACA,EACAW,cAAAA,GACA,+CACA,uDAEA,+CACA,sDAEA,EACAC,aAAAA,GACA,kDACA,8DACA,MACA,kDAEA,CACA,kDACA,8DACA,MACA,kDAEA,CACA,EAEAG,YACA,WAMA,GALA,oCACA,wBACAuD,EAAAA,KAAAA,EAAAA,EACA,IAEA,SAEA,YADA,kDAGA,WACA,gCACAC,EAAAA,KAAAA,CACAC,OAAAA,KAAAA,OACArE,MAAAA,EAAAA,MACAM,YAAAA,EAAAA,YACA2C,WAAAA,EAAAA,WAAAA,KAAAA,MAJA,KAOAqB,EAAAA,EAAAA,IAAAA,CAAAF,iBAAAC,OAAAA,KAAAA,SAAA,UACA,gBACA,sBACA,qBACArE,MAAAA,GACAM,YAAAA,GACA2C,WAAAA,GACA1C,gBAAAA,KAEA,+BAEA,yDACA,GAEA,EACA7B,gBAAAA,IACA6F,EAAAA,EAAAA,IAAAA,CAAAF,OAAAA,EAAAA,KAAA,UACA,mBAEA,GADA,uBACA,wBAGA,OAFA,iCACA,wBAGAG,EAAAA,KAAAA,KAAAA,KAAAA,SAAAA,IACAjC,QAAAA,IAAAA,GACA,2CACA,YAAAkC,GAAA,EACA,KACAC,EAAAA,SAAAA,IACAD,EAAAA,SAAAA,IACA,SACAxD,EAAAA,KAAAA,CACAE,IAAAA,GAAAA,EAAAA,MACAmB,GAAAA,EAAAA,GACA7C,KAAAA,EAAAA,YAEA,GAPA,IAUA,yBACAO,MAAAA,EAAAA,UAAAA,MACAM,YAAAA,EAAAA,UAAAA,YACA2C,aAAAA,EAAAA,UAAAA,WAAAA,EAAAA,EAAAA,UAAAA,WAAAA,MAAAA,KAAAA,GACAhC,SAAAA,EACA0D,aAAAA,EAAAA,UAAAA,GACAN,OAAAA,EAAAA,IANA,IASA,sBACA,IAEA,EACArD,cAAAA,GACA,2CACA,gCACA4D,EAAAA,EAAAA,IAAAA,CAAAtC,OAAA,UACA,gBACA,8BACA,sBAAAA,GAAAA,KAEA,2BACA,GAEA,EACAvB,YAAAA,GACAwB,QAAAA,IAAAA,EAAAA,EAAAA,IACA,8BACAA,QAAAA,IAAAA,IACAsC,EAAAA,EAAAA,IAAAA,CACAvC,GAAAA,EAAAA,aACAtC,MAAAA,EAAAA,MACAM,YAAAA,EAAAA,YACA2C,WAAAA,EAAAA,WAAAA,KAAAA,OACAW,MAAAY,IACA,eACA,8BAEA,2BACA,GAEA,ICrYiQ,ICO7P,GAAY,OACd,EACAxH,EACAkE,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,O,sQCfzB,MAAM4D,EAAcC,IAChBC,EAAAA,EAAAA,IAAU,eAAgBD,GAIxB3B,EAAY2B,IACdE,EAAAA,EAAAA,IAAS,aAAcF,GAIrBG,EAAcH,IAChBE,EAAAA,EAAAA,IAAS,eAAgBF,GAIvBI,EAAcJ,IAChBC,EAAAA,EAAAA,IAAU,eAAgBD,GAIxBhB,EAAcgB,IAChBC,EAAAA,EAAAA,IAAU,eAAgBD,GAIxBT,EAAoBS,IACtBC,EAAAA,EAAAA,IAAU,4BAA6BD,GAIrCR,EAAkBQ,IACpBE,EAAAA,EAAAA,IAAS,oBAAqBF,GAI5BH,EAAoBG,IACtBC,EAAAA,EAAAA,IAAU,sBAAuBD,GAI/BF,EAAoBE,IACtBC,EAAAA,EAAAA,IAAU,sBAAuBD,E,qBC5C5C,MAAM5G,EAAgBiH,IAClB,IAAKA,EACD,MAAO,GAEX,MAAMC,EAAcD,GACTA,GAAO,GAAKA,EAAM,IAAMA,EAE7BE,EAAO,IAAIC,KAAKC,OAAOJ,IACvBK,EAAOH,EAAKI,cACZC,EAAQL,EAAKM,WAAa,EAC1BC,EAAMP,EAAKQ,UACXC,EAAOT,EAAKU,WACZC,EAAUX,EAAKY,aACfC,EAAUb,EAAKc,aACrB,OAAOX,EAAO,IAAMJ,EAAWM,GAAS,IAAMN,EAAWQ,GAAO,IAAMR,EAAWU,GAAQ,IAAMV,EAAWY,GAAW,IAAMZ,EAAWc,EAAtI,EAKJ,Q","sources":["webpack://vue2.0/./src/view/vote/voteList.vue","webpack://vue2.0/./src/view/vote/voteUpload.vue","webpack://vue2.0/src/view/vote/voteUpload.vue","webpack://vue2.0/./src/view/vote/voteUpload.vue?bd7e","webpack://vue2.0/./src/view/vote/voteUpload.vue?39f1","webpack://vue2.0/src/view/vote/voteList.vue","webpack://vue2.0/./src/view/vote/voteList.vue?5e74","webpack://vue2.0/./src/view/vote/voteList.vue?73c9","webpack://vue2.0/./src/api/vote.js","webpack://vue2.0/./src/utils/timerHandler.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"container-title\"},[_vm._v(\"投票列表\")]),_c('div',{staticClass:\"user-btn\"},[_c('el-button',{staticClass:\"user-btn-inp\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"新增\")])],1),_c('div',{staticClass:\"table-list\"},[_c('el-table',{ref:\"singleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"property\":\"id\",\"label\":\"id\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"property\":\"title\",\"label\":\"标题\"}}),_c('el-table-column',{attrs:{\"property\":\"createTime\",\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.timerHandler(scope.row.createTime))+\" \")]}}])}),_c('el-table-column',{attrs:{\"property\":\"timerArr\",\"label\":\"投票时间\",\"width\":\"500\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"240\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.newPosition(scope.row)}}},[_vm._v(\" 创建选项 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.previewPosition(scope.row)}}},[_vm._v(\" 查看选项 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.previewVote(scope.row)}}},[_vm._v(\" 预览 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.editVote(scope.row)}}},[_vm._v(\" 编辑 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.deletes(scope.row)}}},[_vm._v(\" 移除 \")])]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.form.pageNumber,\"layout\":\"prev, pager, next,jumper\",\"total\":_vm.total,\"page-size\":_vm.form.pageSize},on:{\"current-change\":_vm.currentChange}})],1)],1),_c('el-dialog',{attrs:{\"title\":\"新增选项\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_vm._l((_vm.dialog1Option),function(item,index){return _c('div',{key:`dialog1${index}`},[_c('div',{staticStyle:{\"padding\":\"20px 10px\",\"font-size\":\"16px\",\"font-weight\":\"bold\"}},[_vm._v(\"选项\"+_vm._s(index + 1)+\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(index != 0),expression:\"index != 0\"}],staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteDialog1(index)}}},[_vm._v(\"删除\")])],1),_c('el-form',{ref:\"form\",refInFor:true,attrs:{\"model\":item,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"选项标题\"}},[_c('el-input',{staticStyle:{\"width\":\"375px\"},model:{value:(item.title),callback:function ($$v) {_vm.$set(item, \"title\", $$v)},expression:\"item.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"选项描述\"}},[_c('el-input',{staticStyle:{\"width\":\"375px\"},attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2, maxRows: 4}},model:{value:(item.description),callback:function ($$v) {_vm.$set(item, \"description\", $$v)},expression:\"item.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"上传文件\"}},[_c('voteUpload',{attrs:{\"fileList\":item.dialog1FileList,\"index\":index,\"type\":\"upload\"},on:{\"success\":_vm.uploadSuccess,\"removes\":_vm.uploadRemove}})],1)],1)],1)}),_c('div',{},[_c('el-button',{on:{\"click\":_vm.addDialogForm}},[_vm._v(\"新增选项\")])],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addOption}},[_vm._v(\"确 定\")])],1)],2),_c('el-dialog',{attrs:{\"title\":\"编辑选项\",\"visible\":_vm.dialogVisible2},on:{\"update:visible\":function($event){_vm.dialogVisible2=$event}}},_vm._l((_vm.dialog2Option),function(item,index){return _c('div',{key:`dialog1${index}`},[_c('div',{staticStyle:{\"padding\":\"20px 10px\",\"font-size\":\"16px\",\"font-weight\":\"bold\"}},[_vm._v(\"选项\"+_vm._s(index + 1)+\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.editDialog2(index)}}},[_vm._v(\"保存\")]),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteDialog2(index)}}},[_vm._v(\"删除\")])],1),_c('el-form',{ref:\"form\",refInFor:true,attrs:{\"model\":item,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"选项标题\"}},[_c('el-input',{staticStyle:{\"width\":\"375px\"},model:{value:(item.title),callback:function ($$v) {_vm.$set(item, \"title\", $$v)},expression:\"item.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"选项描述\"}},[_c('el-input',{staticStyle:{\"width\":\"375px\"},attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2, maxRows: 4}},model:{value:(item.description),callback:function ($$v) {_vm.$set(item, \"description\", $$v)},expression:\"item.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"上传文件\"}},[_c('voteUpload',{attrs:{\"fileList\":item.fileList,\"index\":index,\"type\":\"detail\"},on:{\"success\":_vm.uploadSuccess,\"removes\":_vm.uploadRemove}})],1)],1)],1)}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-upload',{ref:\"upload\",attrs:{\"action\":_vm.url,\"multiple\":\"\",\"file-list\":_vm.fileList,\"accept\":\".png,.jpeg,.jpg,.mp4,.avi\",\"headers\":_vm.headers,\"on-success\":_vm.success,\"on-remove\":_vm.removes,\"on-preview\":_vm.preview}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1),_c('el-dialog',{attrs:{\"append-to-body\":\"\",\"title\":\"预览\",\"visible\":_vm.imgDialog,\"width\":\"width\"},on:{\"update:visible\":function($event){_vm.imgDialog=$event},\"close\":_vm.dialogClose}},[_c('div',{staticClass:\"img-box\"},[(_vm.dialogType == 'img')?_c('img',{attrs:{\"src\":_vm.imgSrc,\"alt\":\"\",\"srcset\":\"\"}}):_vm._e(),(_vm.dialogType == 'video')?_c('video',{staticStyle:{\"width\":\"400px\"},attrs:{\"controls\":\"controls\",\"src\":_vm.videoSrc,\"z-index\":\"1000\"}}):_vm._e()])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <el-upload ref=\"upload\" :action=\"url\" multiple :file-list=\"fileList\" accept=\".png,.jpeg,.jpg,.mp4,.avi\" :headers=\"headers\" :on-success=\"success\" :on-remove=\"removes\" :on-preview=\"preview\">\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n        </el-upload>\r\n\r\n        <el-dialog append-to-body title=\"预览\" :visible.sync=\"imgDialog\" width=\"width\" @close=\"dialogClose\">\r\n            <div class=\"img-box\">\r\n                <img :src=\"imgSrc\" v-if=\"dialogType == 'img'\" alt=\"\" srcset=\"\">\r\n                <video style=\"width: 400px\" controls=\"controls\" v-if=\"dialogType == 'video'\" :src=\"videoSrc\" z-index=\"1000\"></video>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport dev from '@/utils/dev';\r\n\r\nexport default {\r\n    data () {\r\n        return {\r\n            headers: {\r\n                'ysxf-auth-data': this.$store.state.userData,\r\n                'ysxf-upload-data': JSON.stringify({ category: 'vote' })\r\n            },\r\n            url: `${dev.URL}/file/upload/cos`,\r\n            imgSrc: '',\r\n            imgDialog: false,\r\n            videoDialog: true,\r\n            videoSrc: '',\r\n            dialogType: ''\r\n        };\r\n    },\r\n    props: {\r\n        fileList: Array,\r\n        index: Number,\r\n        type: String\r\n    },\r\n    methods: {\r\n        isImage (test_str) {\r\n            var index = test_str.lastIndexOf('.'); // 获取指定字符串最后一次出现的位置，返回index\r\n            var str = test_str.substr(index + 1); // substr(start, length) 抽取从start下标开始的length个字符，返回新的字符串\r\n            return this.isImageType(str);\r\n        },\r\n        isImageType (str) {\r\n            // toLowerCase() 将字符串转换为小写，返回一个新的字符串\r\n            return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(str.toLowerCase()) !== -1;\r\n        },\r\n        success (res) {\r\n            this.$emit('success', { index: this.index, data: res.data, type: this.type });\r\n        },\r\n        removes (file) {\r\n            if (file.response && file.response.data && file.response.data.id) {\r\n                this.$emit('removes', { index: this.index, id: file.response.data.id, type: this.type });\r\n                return;\r\n            }\r\n        },\r\n        preview (val) {\r\n            console.log(val);\r\n            if (val.response) {\r\n                if (this.isImage(val.response.data.url)) {\r\n                    this.imgSrc = `http://${val.response.data.url}`;\r\n                    this.imgDialog = true;\r\n                    this.dialogType = 'img';\r\n                } else {\r\n                    this.dialogType = 'video';\r\n                    this.imgDialog = true;\r\n                    this.videoSrc = `http://${val.response.data.url}`;\r\n                }\r\n                return;\r\n            }\r\n            if (val.url) {\r\n                if (this.isImage(val.url)) {\r\n                    this.imgSrc = `http://${val.url}`;\r\n                    this.imgDialog = true;\r\n                    this.dialogType = 'img';\r\n                } else {\r\n                    this.imgDialog = true;\r\n                    this.dialogType = 'video';\r\n                    this.videoSrc = `http://${val.url}`;\r\n                }\r\n            }\r\n        },\r\n        dialogClose () {\r\n            const videos = document.querySelectorAll('video');\r\n            if (videos) {\r\n                videos.forEach(item => {\r\n                    item.pause();\r\n                });\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        fileList: {\r\n            handler: function (val) {\r\n                console.log(val);\r\n            },\r\n            deep: true,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.img-box {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./voteUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./voteUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./voteUpload.vue?vue&type=template&id=61060fde&scoped=true&\"\nimport script from \"./voteUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./voteUpload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./voteUpload.vue?vue&type=style&index=0&id=61060fde&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61060fde\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"container\">\r\n        <div class=\"container-title\">投票列表</div>\r\n        <!-- <div class=\"search-box\">\r\n            <div class=\"search-item\">\r\n                <div class=\"search-item-title\">文章标题</div>\r\n                <el-input class=\"search-item-inp\" size=\"small \" v-model=\"input\" placeholder=\"\"></el-input>\r\n            </div>\r\n            <div class=\"search-item\">\r\n                <div class=\"search-item-title\">标题</div>\r\n                <el-input class=\"search-item-inp\" size=\"small\" v-model=\"input\" placeholder=\"\"></el-input>\r\n            </div>\r\n        </div> -->\r\n        <div class=\"user-btn\">\r\n            <el-button class=\"user-btn-inp\" @click=\"add\" type=\"primary\">新增</el-button>\r\n        </div>\r\n        <div class=\"table-list\">\r\n            <el-table ref=\"singleTable\" :data=\"tableData\" style=\"width: 100%\">\r\n                <el-table-column property=\"id\" label=\"id\" width=\"50\">\r\n                </el-table-column>\r\n                <el-table-column property=\"title\" label=\"标题\">\r\n                </el-table-column>\r\n                <el-table-column property=\"createTime\" label=\"创建时间\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{timerHandler(scope.row.createTime)}}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column property=\"timerArr\" label=\"投票时间\" width=\"500\">\r\n                </el-table-column>\r\n                <el-table-column fixed=\"right\" label=\"操作\" width=\"240\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button @click.native.prevent=\"newPosition(scope.row)\" type=\"text\" size=\"small\">\r\n                            创建选项\r\n                        </el-button>\r\n                        <el-button @click.native.prevent=\"previewPosition(scope.row)\" type=\"text\" size=\"small\">\r\n                            查看选项\r\n                        </el-button>\r\n                        <el-button @click.native.prevent=\"previewVote(scope.row)\" type=\"text\" size=\"small\">\r\n                            预览\r\n                        </el-button>\r\n                        <el-button @click.native.prevent=\"editVote(scope.row)\" type=\"text\" size=\"small\">\r\n                            编辑\r\n                        </el-button>\r\n                        <el-button @click.native.prevent=\"deletes(scope.row)\" type=\"text\" size=\"small\">\r\n                            移除\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <div class=\"pagination\">\r\n                <el-pagination :current-page=\"form.pageNumber\" layout=\"prev, pager, next,jumper\" :total=\"total\" @current-change=\"currentChange\" :page-size=\"form.pageSize\">\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n        <!-- 新增选项的弹窗 -->\r\n        <el-dialog title=\"新增选项\" :visible.sync=\"dialogVisible\">\r\n            <div v-for=\"(item,index) in dialog1Option\" :key=\"`dialog1${index}`\">\r\n                <div style=\"padding:20px 10px;font-size: 16px;font-weight:bold;\">选项{{index + 1 }} <el-button v-show=\"index != 0\" style=\"margin-left: 20px\" type=\"text\" @click=\"deleteDialog1(index)\">删除</el-button>\r\n                </div>\r\n                <el-form ref=\"form\" :model=\"item\" label-width=\"80px\">\r\n                    <el-form-item label=\"选项标题\">\r\n                        <el-input v-model=\"item.title\" style=\"width: 375px;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"选项描述\">\r\n                        <el-input v-model=\"item.description\" type=\"textarea\" :autosize=\"{ minRows: 2, maxRows: 4}\" style=\"width: 375px;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"上传文件\">\r\n                        <voteUpload :fileList=\"item.dialog1FileList\" :index=\"index\" @success=\"uploadSuccess\" @removes=\"uploadRemove\" type=\"upload\" />\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n            <div class=\"\">\r\n                <el-button @click=\"addDialogForm\">新增选项</el-button>\r\n            </div>\r\n            <div slot=\"footer\">\r\n                <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"addOption\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n        <!-- 新增选项的弹窗 -->\r\n        <el-dialog title=\"编辑选项\" :visible.sync=\"dialogVisible2\">\r\n            <div v-for=\"(item,index) in dialog2Option\" :key=\"`dialog1${index}`\">\r\n                <div style=\"padding:20px 10px;font-size: 16px;font-weight:bold;\">选项{{index + 1 }}\r\n                    <el-button style=\"margin-left: 20px\" type=\"text\" @click=\"editDialog2(index)\">保存</el-button>\r\n                    <el-button style=\"margin-left: 20px\" type=\"text\" @click=\"deleteDialog2(index)\">删除</el-button>\r\n                </div>\r\n                <el-form ref=\"form\" :model=\"item\" label-width=\"80px\">\r\n                    <el-form-item label=\"选项标题\">\r\n                        <el-input v-model=\"item.title\" style=\"width: 375px;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"选项描述\">\r\n                        <el-input v-model=\"item.description\" type=\"textarea\" :autosize=\"{ minRows: 2, maxRows: 4}\" style=\"width: 375px;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"上传文件\">\r\n                        <voteUpload :fileList=\"item.fileList\" :index=\"index\" @success=\"uploadSuccess\" @removes=\"uploadRemove\" type=\"detail\" />\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </el-dialog>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { voteList, voteDelete, voteOptionCreate, voteOptionList, voteOptionDelete, voteOptionUpdate } from '@/api/vote';\r\nimport timerHandler from '@/utils/timerHandler';\r\nimport voteUpload from '@/view/vote/voteUpload';\r\n\r\n\r\n\r\nexport default {\r\n    components: { voteUpload },\r\n    data () {\r\n        return {\r\n            tableData: [],\r\n            form: {\r\n                pageNumber: 1,\r\n                pageSize: 10,\r\n                isPaging: true,\r\n            },\r\n            total: 0,\r\n            input: '',\r\n            timerHandler,\r\n            dialogVisible: false,\r\n            headers: {\r\n                'ysxf-auth-data': this.$store.state.userData,\r\n                'ysxf-upload-data': JSON.stringify({ category: 'vote' })\r\n            },\r\n            dialog1Option: [\r\n                {\r\n                    title: '',\r\n                    description: '',\r\n                    fileIdList: [],\r\n                    dialog1FileList: []\r\n                }\r\n            ],\r\n            dialog2Option: [\r\n                // {\r\n                //     title: '',\r\n                //     description: '',\r\n                //     fileIdList: [],\r\n                //     fileList: [],\r\n                // }\r\n            ],\r\n            dialogVisible2: false\r\n        };\r\n    },\r\n    created () {\r\n        this.getList();\r\n    },\r\n    methods: {\r\n\r\n        currentChange (val) {\r\n            this.form.pageNumber = val;\r\n            this.getList();\r\n        },\r\n        getList () {\r\n            voteList(this.form).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.total = res.data.data.amount;\r\n                    this.tableData = res.data.data.rows.map(item => {\r\n                        return {\r\n                            ...item,\r\n                            timerArr: timerHandler(item.beginTime) + ' ~ ' + timerHandler(item.endTime),\r\n                        };\r\n                    });\r\n                } else {\r\n                    this.total = 0;\r\n                    this.tableData = [];\r\n                    this.form.pageNumber = 1;\r\n                }\r\n            });\r\n        },\r\n        handleClick (item) {\r\n            console.log(item);\r\n        },\r\n        add () {\r\n            this.$router.push({\r\n                path: '/vote/voteAddOrEdit',\r\n                query: {\r\n                    type: 'add'\r\n                }\r\n            });\r\n        },\r\n        handleCurrentChange (val) {\r\n            console.log(val);\r\n        },\r\n        deletes (row) {\r\n            this.$confirm('此操作将永久删除该投票, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.deleteVote(row);\r\n            }).catch(() => {\r\n\r\n            });\r\n        },\r\n        deleteVote (row) {\r\n            voteDelete({ id: row.id }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.$message.success('删除成功');\r\n                    this.getList();\r\n                } else {\r\n                    this.$message.error(`${res.data.message},${res.data.detail}`);\r\n                }\r\n            });\r\n        },\r\n        editVote (row) {\r\n            this.$router.push({\r\n                path: '/vote/voteAddOrEdit',\r\n                query: {\r\n                    type: 'edit',\r\n                    id: row.id,\r\n                }\r\n            });\r\n        },\r\n        previewVote (row) {\r\n            this.$router.push({\r\n                path: '/vote/voteAddOrEdit',\r\n                query: {\r\n                    type: 'preview',\r\n                    id: row.id,\r\n                }\r\n            });\r\n        },\r\n        // 弹窗1相关操作\r\n        // 点击相应的列表新增选项\r\n        newPosition (row) {\r\n            this.voteId = row.id;\r\n            this.dialog1Option = [\r\n                {\r\n                    title: '',\r\n                    description: '',\r\n                    fileIdList: [],\r\n                    dialog1FileList: []\r\n                }\r\n            ];\r\n            this.dialogVisible = true;\r\n        },\r\n        // 上传成功的回调\r\n        dialog1Success (res) {\r\n            console.log(res);\r\n        },\r\n        // 获取上传成功后的文件列表\r\n        dialog1Onchange (file, fileList) {\r\n            this.dialog1FileList = fileList;\r\n        },\r\n        // 用于区分是点击了那个选项的上传按钮给fileList丢值\r\n        dialogBtn (index) {\r\n            this.dialogIndex = index;\r\n        },\r\n        // 新增弹窗1option线下\r\n        addDialogForm () {\r\n            this.dialog1Option.push({\r\n                title: '',\r\n                description: '',\r\n                fileIdList: [],\r\n                dialog1FileList: []\r\n            });\r\n        },\r\n        // 删除对应的下标\r\n        deleteDialog1 (index) {\r\n            this.dialog1Option.splice(index, 1);\r\n        },\r\n        uploadSuccess (res) {\r\n            if (this.dialog1Option[res.index] && res.type == 'upload') {\r\n                this.dialog1Option[res.index].fileIdList.push(res.data.id);\r\n            }\r\n            if (this.dialog2Option[res.index] && res.type == 'detail') {\r\n                this.dialog2Option[res.index].fileIdList.push(res.data.id);\r\n            }\r\n        },\r\n        uploadRemove (res) {\r\n            if (this.dialog1Option[res.index] && res.type == 'upload') {\r\n                const index = this.dialog1Option[res.index].fileIdList.indexOf(res.id);\r\n                if (index != -1) {\r\n                    this.dialog1Option[res.index].fileIdList.splice(index, 1);\r\n                }\r\n            }\r\n            if (this.dialog2Option[res.index] && res.type == 'detail') {\r\n                const index = this.dialog2Option[res.index].fileIdList.indexOf(res.id);\r\n                if (index != -1) {\r\n                    this.dialog2Option[res.index].fileIdList.splice(index, 1);\r\n                }\r\n            }\r\n        },\r\n        // 新增选项\r\n        addOption () {\r\n            const errorArr = [];\r\n            this.dialog1Option.forEach((item, index) => {\r\n                if (!item.description || !item.title) {\r\n                    errorArr.push(index + 1);\r\n                }\r\n            });\r\n            if (errorArr.length) {\r\n                this.$message.error(`请确保${errorArr.join(',')}行的标题和描述已填`);\r\n                return;\r\n            }\r\n            const optionDataList = [];\r\n            this.dialog1Option.forEach(item => {\r\n                optionDataList.push({\r\n                    voteId: this.voteId,\r\n                    title: item.title,\r\n                    description: item.description,\r\n                    fileIdList: item.fileIdList.join(',')\r\n                });\r\n            });\r\n            voteOptionCreate({ optionDataList, voteId: this.voteId }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.dialogVisible = false;\r\n                    this.dialog1Option = [{\r\n                        title: '',\r\n                        description: '',\r\n                        fileIdList: [],\r\n                        dialog1FileList: []\r\n                    }];\r\n                    this.$message.success('新增成功');\r\n                } else {\r\n                    this.$message.error(`${res.data.message},${res.data.detail}`);\r\n                }\r\n            });\r\n        },\r\n        previewPosition (row) {\r\n            voteOptionList({ voteId: row.id }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.dialog2Option = [];\r\n                    if (!res.data.data.rows.length) {\r\n                        this.$message.error('没有选项');\r\n                        this.dialogVisible2 = false;\r\n                        return;\r\n                    }\r\n                    res.data.data.rows.forEach(item => {\r\n                        console.log(item);\r\n                        const imgArr = item.optionRow.fileIdList.split(',');\r\n                        const { fileRowList } = item;\r\n                        const fileList = [];\r\n                        imgArr.forEach(imgItem => {\r\n                            fileRowList.forEach(item2 => {\r\n                                if (item2.id == imgItem) {\r\n                                    fileList.push({\r\n                                        url: `${item2.url}`,\r\n                                        id: item2.id,\r\n                                        name: item2.originName,\r\n                                    });\r\n                                }\r\n                            });\r\n                        });\r\n                        this.dialog2Option.push({\r\n                            title: item.optionRow.title,\r\n                            description: item.optionRow.description,\r\n                            fileIdList: !!item.optionRow.fileIdList > 0 ? item.optionRow.fileIdList.split(',') : [],\r\n                            fileList: fileList,\r\n                            voteOptionId: item.optionRow.id,\r\n                            voteId: row.id\r\n                        });\r\n                    });\r\n                    this.dialogVisible2 = true;\r\n                }\r\n            });\r\n        },\r\n        deleteDialog2 (index) {\r\n            const id = this.dialog2Option[index].voteOptionId;\r\n            const voteId = this.dialog2Option[index].voteId;\r\n            voteOptionDelete({ id }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.$message.success('删除成功');\r\n                    this.previewPosition({ id: voteId });\r\n                } else {\r\n                    this.$message.error('删除失败');\r\n                }\r\n            });\r\n        },\r\n        editDialog2 (index) {\r\n            console.log(index, voteOptionUpdate);\r\n            const data = this.dialog2Option[index];\r\n            console.log(data);\r\n            voteOptionUpdate({\r\n                id: data.voteOptionId,\r\n                title: data.title,\r\n                description: data.description,\r\n                fileIdList: data.fileIdList.join(',')\r\n            }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.$message.success('更新成功');\r\n                } else {\r\n                    this.$message.error('更新失败');\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./voteList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./voteList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./voteList.vue?vue&type=template&id=3ef51766&scoped=true&\"\nimport script from \"./voteList.vue?vue&type=script&lang=js&\"\nexport * from \"./voteList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ef51766\",\n  null\n  \n)\n\nexport default component.exports","import { postAxios, getAxios } from '../utils/http';\r\n\r\n// 发布活动\r\nexport const voteCreate = (params) => {\r\n    return postAxios('/vote/create', params);\r\n};\r\n\r\n// 活动列表\r\nexport const voteList = (params) => {\r\n    return getAxios('/vote/list', params);\r\n};\r\n\r\n// 活动详情\r\nexport const voteDetail = (params) => {\r\n    return getAxios('/vote/detail', params);\r\n};\r\n\r\n// 更新活动\r\nexport const voteUpdate = (params) => {\r\n    return postAxios('/vote/update', params);\r\n};\r\n\r\n// 删除活动\r\nexport const voteDelete = (params) => {\r\n    return postAxios('/vote/delete', params);\r\n};\r\n\r\n// 批量创建选项\r\nexport const voteOptionCreate = (params) => {\r\n    return postAxios('/vote/option/create/batch', params);\r\n};\r\n\r\n// 获取选项的列表\r\nexport const voteOptionList = (params) => {\r\n    return getAxios('/vote/option/list', params);\r\n};\r\n\r\n// 选项删除\r\nexport const voteOptionDelete = (params) => {\r\n    return postAxios('/vote/option/delete', params);\r\n};\r\n\r\n// 选项更新\r\nexport const voteOptionUpdate = (params) => {\r\n    return postAxios('/vote/option/update', params);\r\n};","const timerHandler = (str) => {\r\n    if (!str) {\r\n        return '';\r\n    }\r\n    const isBeginTen = (str) => {\r\n        return str >= 10 ? str : '0' + str;\r\n    };\r\n    const date = new Date(Number(str)); //获取一个时间对象\r\n    const year = date.getFullYear();  // 获取完整的年份(4位,1970)\r\n    const month = date.getMonth() + 1;  // 获取月份(0-11,0代表1月,用的时候记得加上1)\r\n    const day = date.getDate();  // 获取日(1-31)\r\n    const hour = date.getHours();  // 获取小时数(0-23)\r\n    const minutes = date.getMinutes();  // 获取分钟数(0-59)\r\n    const seconds = date.getSeconds();\r\n    return year + '-' + isBeginTen(month) + '-' + isBeginTen(day) + ' ' + isBeginTen(hour) + ':' + isBeginTen(minutes) + ':' + isBeginTen(seconds);\r\n};\r\n\r\n\r\n\r\nexport default timerHandler;"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","add","ref","staticStyle","tableData","scopedSlots","_u","key","fn","scope","_s","timerHandler","row","createTime","nativeOn","$event","preventDefault","newPosition","previewPosition","previewVote","editVote","deletes","form","pageNumber","total","pageSize","currentChange","dialogVisible","_l","dialog1Option","item","index","directives","name","rawName","value","expression","deleteDialog1","refInFor","model","title","callback","$$v","$set","minRows","maxRows","description","dialog1FileList","uploadSuccess","uploadRemove","addDialogForm","slot","addOption","dialogVisible2","dialog2Option","editDialog2","deleteDialog2","fileList","staticRenderFns","url","headers","success","removes","preview","imgDialog","dialogClose","dialogType","imgSrc","_e","videoSrc","data","category","videoDialog","props","type","methods","isImage","isImageType","id","console","videos","watch","handler","deep","component","components","voteUpload","isPaging","input","fileIdList","created","getList","voteList","timerArr","handleClick","path","query","handleCurrentChange","confirmButtonText","cancelButtonText","then","catch","deleteVote","voteDelete","dialog1Success","dialog1Onchange","dialogBtn","errorArr","optionDataList","voteId","voteOptionCreate","voteOptionList","res","fileRowList","imgArr","voteOptionId","voteOptionDelete","voteOptionUpdate","voteCreate","params","postAxios","getAxios","voteDetail","voteUpdate","str","isBeginTen","date","Date","Number","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minutes","getMinutes","seconds","getSeconds"],"sourceRoot":""}